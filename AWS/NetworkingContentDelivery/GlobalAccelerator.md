# Global Accelerator
## Global Users for Application

![ga1](https://github.com/seungwonbased/TIL/blob/main/AWS/assets/ga1.png)

- 우선 해결할 문제가 무엇인지 그리고 어떻게 해결할 수 있는지 정의
- 예시
	- 애플리케이션을 배치했다고 가정
	- 이는 글로벌 애플리케이션이고 글로벌 사용자들이 직접 접근하려고 함
	- 그러나 애플리케이션은 오직 한 리전에 배치되어 있음
	- 예를 들면 인도에 공용 애플리케이션 로드 밸런서를 배치
	- 반면에 사용자들은 전 세계에 걸쳐 있음
		- 미국에도 있고 유럽과 오스트레일리아에도 있음
	- 사용자들이 애플리케이션에 접근할 때는 공용 인터넷을 통하게 되는데 라우터를 거치는 동안의 수 많은 홉으로 인해 상당한 지연이 발생할 수 있음
	- 미국을 보면, 인도의 공용 ALB에 도달하기 전에 다섯 개의 홉, 즉 라우터 또는 서버들이 있음
		- 이는 공용 인터넷을 거치기 때문
		- 오스트레일리아에도 많은 홉이 있고 유럽에도 마찬가지
	- 이 홉들은 위험 요소가 될 수 있음
		- 연결이 끊길 수 있기 때문
		- 또한 지연 시간도 발생
		- Amazon 인프라에 최대한 직접적으로 접근하는 것도 아님
	- 따라서 지연 시간을 최소화하기 위해 최대한 빨리 AWS 네트워크를 통하는 것이 좋음
- 이를 위해 Global Accelerator를 사용

## Unicast IP vs Anycast IP

![ga2](https://github.com/seungwonbased/TIL/blob/main/AWS/assets/ga2.png)

- 유니캐스트 IP
	- 하나의 서버가 하나의 IP 주소를 가짐
	- 따라서 클라이언트가 두 개의 서버와 통신할 때 왼편 서버의 IP 주소는 숫자 12로 시작하고, 반대편은 98로 시작
		- 12로 시작하는 IP 주소를 참조한다면 왼편의 서버로 연결되고 반대편 IP를 사용하면 오른편의 서버로 연결될 것임
- 애니캐스트 IP
	- 모든 서버가 동일한 IP 주소를 가지며 클라이언트는 가장 가까운 서버로 라우팅됨
	- 클라이언트와 두 개의 서버가 있고 보시는 것처럼 이 두 개의 서버는 아래 쪽에 있는데 IP가 동일
	- 클라이언트가 이 애니캐스트 IP로 접속을 시도하면 자신과 가장 가까운 서버로 연결됨
- Global Accelerator는 이 애니캐스트 IP 개념을 사용

## AWS Global Accelerator

![ga3](https://github.com/seungwonbased/TIL/blob/main/AWS/assets/ga3.png)

- 작동 방식
- 애플리케이션을 라우팅하기 위해 AWS 내부 글로벌 네트워크를 활용
- 사용자들이 전 세계에 걸쳐 있고 그 사용자를 인도로 라우팅 하고 싶음
- 그리고 미국의 공용 인터넷을 거쳐서 보내는 대신에 가장 가까운 엣지 로케이션과 통신할 것임
	- 엣지 로케이션으로부터 내부 AWS 네트워크를 거쳐 ALB로 곧장 연결
- 오스트레일리아도 동일
	- 오스트레일리아 인근의 엣지 로케이션으로 가서 사설 AWS 네트워크를 거쳐 ALB에 도달
- 유럽도 마찬가지
- 요점은 애니캐스트 IP를 사용한다는 것
- 사실, 애플리케이션을 위해 두 개의 애니캐스트 IP가 생성되는데 둘 다 글로벌함
- 그리고 애니캐스트 IP는 사용자와 가장 가까운 엣지 로케이션으로 트래픽을 직접 전송
	- 이것이 애니캐스트 IP의 장점
- 그러면 엣지 로케이션은 훨씬 안정적이고 지연 시간이 적은 사설 AWS 네트워크를 거쳐 애플리케이션 로드 밸런서로 트래픽을 전송
- Global Accelerator는 어떤 애플리케이션에 대해서도 전 세계의 유저들에게 두 개의 고정 IP 주소를 제공할 수 있도록 해준다는 점에서 매우 독특
- 지금은 한 리전에 있는 한 ALB만 예시로 들지만, 이는 글로벌해질 수 있으며 다수의 ALB나 리전이 될 수 있음
- 무엇과 함께 작동하는지?
	- 탄력적 IP
	- EC2 인스턴스
	- 애플리케이션 로드 밸런서
	- 네트워크 로드 밸런서와 함께 작동
- 공용일 수도 있고 사설일 수도 있음
- Consistent Performance
	- 네트워크를 거치기 때문에 안정적인 성능을 보여줌
	- 지능형 라우팅으로 지연 시간이 가장 짧은 엣지 로케이션으로 연결되며 뭔가 잘못될 경우에는 신속한 리전 장애 조치가 이루어짐
	- 아무것도 캐시하지 않기에 클라이언트 캐시와도 문제가 없음
	- 사용하는 두 개의 애니캐스트 IP는 변하지 않음
	- 엣지 로케이션 다음에 내부 AWS 네트워크가 오기 때문에 완벽함
- Health Checks
	- Global Accelerator가 애플리케이션에 대해 상태 확인을 실행
	- 그리고 애플리케이션이 글로벌한지 확인
	- 한 리전에 있는 한 ALB에 대해 상태 확인을 실패하면 자동화된 장애 조치가 1분 안에 정상 엔드 포인트로 실행됨
	- 상태 확인 덕분에 재해 복구에 특히 뛰어남
- Security
	- 클라이언트가 화이트리스트 해야 하는 단 두 개의 외부 IP만 존재하기 때문에 보안 측면에서도 매우 안전
	- Global Accelerator를 통해 DDoS 보호도 자동으로 받음
		- 보안 챕터에 있는 AWS Shield 덕분

## AWS Global Accelerator vs CloudFront

- 공통점
	- Global Accelerator와 CloudFront는 둘 다 동일한 글로벌 네트워크를 사용하고 둘 다 AWS가 생성한 전 세계의 엣지 로케이션을 사용
	- DDoS 보호를 위해 둘 다 AWS Shield와 통합
	- 둘 다 같은 것을 받음
- 차이점
	- CloudFront
		- 이미지나 비디오처럼 캐시 가능한 내용과 API 가속 및 동적 사이트 전달 같은 동적 내용 모두에 대해 성능을 향상시킴
		- 그리고 이 내용은 엣지 로케이션으로부터 제공됨
		- 따라서 엣지 로케이션은 가끔 한 번씩 출처로부터 내용을 가져옴
		- 대부분의 경우에 CloudFront는 캐시된 내용을 엣지로부터 가져와서 전달
		- 즉 사용자들은 엣지로부터 내용을 받음
	- Global Accelerator
		- TCP나 UDP상의 다양한 애플리케이션 성능을 향상시킴
		- 그러나 패킷은 엣지 로케이션으로부터 하나 이상의 AWS 리전에서 실행되는 애플리케이션으로 프록시됨
		- 모든 요청이 애플리케이션 쪽으로 전달됨
		- 캐싱은 불가능
		- 따라서 게임이나 IoT 또는 Voice over IP 같은 비 HTTP를 사용할 경우에 매우 적합
		- 글로벌하게 고정 IP를 요구하는 HTTP를 사용할 때도 매우 유용
		- 또는 결정적이고 신속한 리전 장애 조치가 필요할 때도 좋음

