# Image and Disk options

# Image

- 가상 머신을 만들 때 부팅 디스크 이미지를 선택할 수 있음
- 이 이미지에는 부트 로더, 운영체제, 파일 시스템 구조, 사전 구성된 소프트웨어, 기타 맞춤 설정이 포함

## 공개 이미지

- Linux and Windows 이미지 등
- 이러한 이미지 중 일부는 프리미엄 이미지: 괄호 안에 p
    - 프리미엄 이미지의 가격은 머신 유형에 따라 다름
    - 가격은 전역적이며 리전이나 영역 별로 다르지 않음
    - 1분의 최소 요금 적용 후 초당 요금이 부과됨
        - 예외적으로 SQL 서버 이미지는 최소 요금 10분 적용 후 분당 과금

## 커스텀 이미지

- 특정 조직용으로 승인된 소프트웨어를 사전 설치해 커스텀 이미지를 만들고 사용 가능
- 자체 프레미스나 워크스테이션 또는 다른 클라우드 제공업체에서 이미지를 가져올 수도 있음
    - 무료 서비스로 매우 간단

# Machine Image

- 머신 이미지는 가상 머신 인스턴스를 만드는 데 필요한 하나 이상의 디스크의 모든 구성, 메타데이터, 권한, 데이터를 저장하는 Compute Engine 리소스
- 인스턴스 생성, 백업 및 복구, 인스턴스 클론과 같은 다양한 시스템 유지보수 시나리오에서 사용 가능

# Disk options

- 모든 VM에는 단일 루트 영구 디스크가 제공됨
    - 로드할 기본 이미지를 선택하기 때문
    - 이 이미지는 VM에 연결해 VM에서 부팅 가능, VM이 종료되어도 유지될 수 있는 내구성
        - VM 삭제 후에도 부팅 디스크가 유지되도록 하려면 인스턴스의 속성에서 ‘인스턴스 삭제 시 부팅 디스크 삭제’ 옵션을 사용 중지 해야함
- 디스크는 네트워크에 연결된 가상 기기이기 때문에 디스크를 늘리고 파일 시스템의 크기를 조정하기만 하면 됨
- 데이터 중복 및 스냅샷 서비스는 기본 제공되며 디스크는 자동 암호화됨

## Persistant disks

- 첫 번째로 만드는 디스크
- 네트워크 인터페이스를 통해 이 디스크를 VM에 연결
- 영구적이지만 물리적으로 머신에 연결되지는 않음
    - 이러한 분리 때분에 VM 종료 후에도 디스크 유지
- 스냅샷 생성 가능
- HDD와 SSD 디스크 중 선택할 때는 비용과 성능을 고려
- VM에 연결되고 실행 중인 경우에도 동적으로 디스크 크기를 조정하는 기능 존재
- 여러 VM에 읽기 전용 모드로 디스크 연결 가능
    - 정적 데이터를 여러 인스턴스에서 공유 가능
    - 인스턴스마다 데이터를 고유 디스크에 복제하는 것보다 비용이 적게 듬
- 영역 영구 디스크
    - 효율적이고 안정적인 블록 스토리지 제공
- 리전 영구 디스크
    - 한 리전 내 두 영역 간 active-active 디스크 복제를 제공
    - 리전 영구 디스크가 제공하는 내구성 있는 스토리지는 영역 간에 동기식으로 복제되며 고성능 데이터베이스 및 고가용성이 필요한 엔터프라이즈 애플리케이션을 위한 좋은 옵션
- 영역 혹은 리전 영구 디스크를 구성할 때 다음 디스크 유형 중 하나 선택
    - 표준 영구 디스크
        - HDD에 백업됨
    - 균형 있는 영구 디스크
        - SSD에 백업됨
        - SSD 영구 디스크 대신 사용할 수 있고 성능과 비용의 균형을 맞출 수 있음
    - SSD 영구 디스크
        - SSD에 백업됨
        - 좀 더 비쌈
    - 익스트림 영구 디스크
        - SSD에 백업됨
        - 높은 IOPS와 낮은 레이턴시 제공
        - 상당히 비쌈
- Compute Engine은 모든 저장 데이터를 암호화
    - Google Cloud가 암호화를 처리 및 관리함
    - 직접 제어하고 싶다면 Cloud Key Management Service를 사용해 키 암호화를 만들어 관리하거나 자체 암호화 키를 만들어 관리 가능

## Local disks

- 가상 머신에 물리적으로 연결된다는 점에서 영구 디스크와 다름
- 로컬 SSD는 임시적이지만 IOPS가 매우 높음
- 이 디스크에 있는 데이터는 재설정 후에도 유지되지만 VM 중지나 종료 후에는 유지되지 않음

## RAM disks

- 메모리에 데이터를 저장하려면 tmpfs를 사용하면 됨
- 소규모 데이터 구조가 필요한 경우 가장 빨리 사용할 수 있는 성능 옵션
- 여기에 더해 영구 디스크를 사용한 RAM 백업 기능이 필요하면 높은 메모리 가상 머신을 사용하는 것이 좋음