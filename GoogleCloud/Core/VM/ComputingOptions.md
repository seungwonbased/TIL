# Computing Options

# 3가지 옵션을 통해 VM을 구성

- Google Cloud Console
- Cloud Shell
- RESTful API

# 머신 유형

- 머신 계열은 특정 워크로드에 최적화된 프로세서와 하드웨어 구성을 선별한 집합
- 각 머신 계열은 머신 시리즈와 각 시리즈 내의 사전 정의된 머신 유형으로 구성
- 혹은 커스텀 머신 유형을 만들 수도 있음

## 사전 정의된 Compute Engine 머신 유형 네 가지 계열

### General-purpose

- 메모리 대비 가상 CPU 비율의 유연성을 제고하여 가격 대비 성능이 무척 좋음
- 대부분의 표준 및 클라우드 기반 워크로드에 적합한 기능 제공
- E2 머신 시리즈
    - 반복적인 컴퓨팅 작업을 저렴한 비용으로 처리하는 데 적합
    - 특정 CPU 아키텍처에 애플리케이션 종속성이 없는 경우에 좋음
    - E2 VM을 약정 사용 할인과 함께 사용하면 Compute Engine에서 가장 저렴하게 다양한 컴퓨팅 리소스를 이용할 수 있음
    - 원하는 vCPU와 메모리 용량을 선택하기만 하면 Google이 대신 프로비저닝
    - 웹 서버, 중소형 데이터베이스 개발 및 테스트 환경을 비롯해 엄격한 성능 요건이 없는 다수의 애플리케이션에 적합
    - N1 VM을 사용하고 있는 사용자를 위해 현재 N1 VM과 호환되는 성능 기준 제공
    - 공유 코어 머신 유형도 포함
        - 멀티태스킹을 지원하기 위해 컨텍스트 전환을 사용해 vCPU 간에 물리적 코어 공유
        - 유형에 따라 물리적 코어의 시간이 달라짐
        - 리소스 사용이 적은 소규모 애플리케이션을 실행할 때 표준, 고성능 메모리, 고성능 CPU 머신 유형에 비해 비용 효율성이 좋음
- N2 및 N2D 머신 시리즈
    - 가장 유연한 VM 유형
    - 다양한 VM 형태 전반에서 가격과 성능 간의 균형을 잘 유지
    - 엔터프라이즈 애플리케이션, 중대형 데이터베이스, 많은 웹 및 앱 제공 워크로드에 적합
    - 약정 사용 할인과 지속 사용 할인 서비스 지원
- Tau T2D VM
    - 비용 효율적인 성능을 갖춘 요구 조건이 많은 수평 확장형 워크로드에 최적화
    - 웹 서버, 컨테이너화된 마이크로 서비스, 미디어 트랜스코딩, 대규모 자바 애플리케이션 등 수평 확장 워크로드에 적합
    - 컨테이너화된 워크로드가 있는 경우 GKE에서 Tau VM을 지원하므로 가격 대비 성능을 최적화할 수 있음

### Compute-optimized

- Compute Engine에서 코어당 성능이 가장 우수하며 컴퓨팅 집약적인 워크로드에 최적화
- C2 머신 시리즈
    - AAA 게임, 전자 설계 자동화, 시뮬레이션, 게놈 분석, 미디어 트랜스코딩 등에 적합
    - 기본 서버 플랫폼의 아키텍처에 완전한 투명성을 제공하므로 성능을 미세하게 조정 가능
- C2D 머신 시리즈
    - 가장 큰 VM 크기를 제공하며 고성능 컴퓨팅에 가장 적합
    - 코어당 가장 큰 Last-level 캐시

### Memory-optimized

- Compute Engine 계열 제품 대부분의 컴퓨팅 및 메모리 리소스를 제공
- 고성능 메모리 머신 유형 및 범용 머신 계열보다 vCPU 대비 메모리 비율이 커야하는 워크로드에 이상적
- M 머신 시리즈
    - 대규모 인메모리 데이터베이스와 인메모리 데이터 분석 워크로드에 적합
    - Compute Engine에서 1GB당 메모리 비용이 가장 저렴하므로 컴퓨팅 리소스 요건이 적고 고성능 메모리 구성을 활용하는 워크로드에 적합
    - 지속 사용 할인율을 최대 30%까지 제공하며 3년 약정으로 이용하는 경우 추가로 60%가 넘는 약정 사용 할인 혜택을 제공

### Accelerator-optimized

- 머신 러닝과 같은 대규모 병렬 컴퓨팅 통합 및 기기 아키텍처 (CUDA) 컴퓨팅 워크로드에 적합
- GPU가 필요한 워크로드에 최적화
- 대용량 언어 모델, 데이터베이스, 고성능 컴퓨팅에 적합
- A 머신 시리즈

## 커스텀 Compute Engine 머신 유형

- 워크로드가 주어진 사전 정의된 머신 유형에 적합하지 않은 경우나 워크로드에 처리 능력이나 메모리가 더 많이 필요하지만 사전 정의된 머신 유형 중 그 다음으로 큰 크기를 선택할 때 제공되는 업그레이드에서 일부만 필요한 경우 선택
- 동급의 사전 정의된 머신 유형보다 비용이 다소 추가
- 선택 가능한 메모리 및 vCPU에 일부 제약
- 한 개의 vCPU 또는 짝수의 vCPU를 사용하는 머신 유형만 만들 수 있음
- 인스턴스의 총 메모리는 256MB의 배수여야 함
- 기본적으로 커스텀 머신은 vCPU당 메모리가 6.5GB까지 가능
    - 부족하다면 추가 비용을 지불해 확장 메모리 확보 가능

# 리전과 영역을 선택할 때 고려할 사항

- 리소스를 실행할 지리적 위치

# Pricing

- Google Cloud의 다양한 옵션을 사용하면 Compute Engine 리소스 비용을 낮게 유지할 수 있음
- 모든 vCPU, GPU, GB 단위 메모리는 최소 1분부터 요금이 청구되며 이후로 초 단위 청구
- Compute Engine은 리소스 기반 가격 책정 모델 사용
    - 이 모델은 각 vCPU 및 각 GB 메모리를 단일 머신 유형의 일부로 취급하지 않고, 이들 비용을 분리해 청구
    - 사전 정의된 머신 유형을 사용해 인스턴스를 생성하더라도 청구서에는 사용된 vCPU 수와 메모리를 기준으로 요금이 표시됨
- 몇 가지 할인 혜택이 제공되지만 할인 유형을 중복으로 결합할 수는 없음
- 리소스 기반 가격 책정 모델을 통해 개별 머신 유형이 아닌 한 리전 내에서 사전 정의된 모든 머신 유형에 지속 사용 할인을 일괄 적용
- 워크로드가 안정적이고 예측 가능한 경우 특정 양의 vCPU와 메모리의 사용 기간을 1년 또는 3년으로 약정하면 할인을 받을 수 있음
- 대부분의 머신 유형 또는 커스텀 머신의 할인율은 최대 57%
    - 메모리 최적화 머신 유형의 최대 할인율은 70%
- 선점형 VM과 Spot VM은 일반 인스턴스보다 훨씬 저렴한 가격으로 만들어 실행할 수 있는 인스턴스
    - 선점형 VM은 한 번에 최대 24시간 동안만 실행 가능
    - Spot VM은 최대 런타임이 없음
- 비용 또한 맞춤 설정 가능
    - Compute Engine은 머신 크기와 관련해 가상 머신 인스턴스의 리소스 사용을 최적화할 수 있는 VM의 크기를 추천해줌
    - 새 인스턴스를 만들면 인스턴스를 생성하고 24시간 후에 새 인스턴스에 관한 추천이 표시
- Compute Engine에는 무료 사용량 한도도 있음
- 지속 사용 할인은 결제 월의 상당 기간 동안 특정 리소스, vCPU, 메모리, GPU 기기를 실행하면 자동 적용
    - 이러한 리소스 중 하나를 한 달 기준 25% 이상 실행하면 Compute Engine은 이 인스턴스에서 사용하는 모든 분 단위 증분 시간에 대해 자동으로 할인 제공
    - 사용량이 늘어날수록 할인율은 높아지며 한 달 내내 실행하는 인스턴스의 경우 최대 30%의 순 할인을 받을 수 있음
        - 30% 할인을 모두 받으려면 해당 월의 시작일에 VM 인스턴스를 생성해야 됨, 매월 초에 할인이 재설정
- Google Cloud 가격 계산기를 사용해 임의의 워크로드에 대해 지속 사용 할인율을 추정할 수도 있음
