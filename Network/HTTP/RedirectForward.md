# Redirect vs Forward

- 특정 URL 접속 시 리다이렉트 또는 포워드가 일어나면 작업 중인 페이지가 전환됨

## Redirection

- 서버에서 클라이언트가 요청한 URL에 대한 응답에서 다른 URL로 재접속하라고 명령을 보내는 것
- 클라이언트(웹 브라우저)는 해당 URL로 다시 요청

### Redirection을 명시하는 방법

- HTTP Redirection
	- HTTP 응답 상태 코드와 location 헤더를 이용
- HTML Redirection
	- \<meta> 태그를 이용
- JavaScript Redirection
	- window.location 속성을 이용

### Open Redirect 취약점

- 웹 애플리케이션에서 신뢰할 수 없는 입력값을 허용하게 될 경우 악의적인 목적이 담긴 URL로 리다이렉션 시켜 개인정보나 악성 코드가 포항되어 있는 사이트로 이동시킬 수 있음
- 리다이렉션 또는 포워딩에 사용되는 주소가 외부에서 전달되는 경우, 그 주소를 검증, 제한하지 않고 사용하는 경우 발생할 수 있음

#### 제한
- White List (허용 목록)
	- 특정 항목이나 프로세스, 사용자 등을 명시적으로 허용하는 목록
		- 즉, 화이트리스트에 등록된 것만이 시스템이나 네트워크에 접근하거나 실행될 수 있음
	- 장점
		- 보안 레벨이 높음
		- 보안 정책을 명확하게 정의할 수 있음
		- 예상치 못한 위협을 방지할 수 있음
	- 단점
		- 관리가 번거로움 (항목 추가, 제거, 업데이트 등)
		- 필요한 프로세스나 응용 프로그램을 빠뜨릴 경우 사용에 제약을 줄 수 있음
		- 모집합이 너무 크거나 업데이트가 아주 빈번한 경우 사용할 수 없음
- Black List (제한 목록)
	- 특정 항목이나 프로세스, 사용자 등을 명시적으로 제한하는 목록
		- 즉, 블랙리스트에 등록된 것만들 제한하고 나머지는 허용
	- 장점
		- 관리가 비교적 간단, 주로 위협을 식별하고 이를 차단하는 데 사용됨
		- 화이트리스트보다는 유연하게 운영할 수 있음
	- 단점
		- 주로 보안 위협을 대응하는 데 주로 사용되므로 보안 레벨이 낮을 수 있음
			- 새로운 위협이 나타날 때까지 대응하지 못할 수 있음
		- 새로운 제한 사항이 생기면 업데이트하는 데 번거로움
			- 화이트리스트는 새로운 사항은 일단 기본적으로 차단

## Forwarding

- 서버 내부에서 일어나는 호출
- 클라이언트의 URL에 대한 요청이 들어오면 해당 URL이 다른 URL로 포워딩된 것이 확인되었을 경우 서버에서 포워딩된 URL의 리소스를 확인해 클라이언트에 응답
- 클라이언트(웹 브라우저)에서 요청한 URL과 요청 정보는 바뀌지 않음

## Redirection과 Forwarding의 사용

- 리다이렉션은 클라이언트의 요청에 의해 서버의 DB에 변화가 생기는 작업에 사용
	- 회원가입, 주문과 같은 경우는 리디렉션을 사용해야 요청이 중복되는 것을 방지할 수 있음
		- 포워딩을 사용하면 클라이언트가 요청 정보를 유지하기 때문에 새로고침같은 걸 하면 요청이 중복될 수 있음
- 포워딩은 특정 URL에 대해 외부에 공개되지 말아야 하는 부분을 가리는 데 사용하거나 조회를 위해 사용됨
	- 로드 밸런서, 프록시 서버, 인증 서버와 같은 중간 계층 시스템에서 사용됨
		- 로드 밸런싱, 보안 검사, 캐싱, 압축 등과 같은 기능을 추가하거나 서버 간의 트래픽 분배를 수행할 때 유용
