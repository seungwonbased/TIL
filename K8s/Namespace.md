# Namespace

- 리소스를 논리적으로 구분하는 장벽
- 클러스터 안의 가상 클러스터
	- Pod, ReplicaSet, Deployment, Service와 같은 쿠버네티스 리소스들이 묶여 있는 하나의 가상 공간
- 리소스를 논리적으로 구분하기 위해 사용
- 네임스페이스마다 권한 설정이 가능
- 네임스페이스는 개발 팀이 일정 규모 이상일 때 유용

## Namespace를 사용해 논리적으로 구분할 수 있는 대상

 - kubectl 명령어의 적용 범위
 - CPU 시간과 메모리 용량 등의 리소스 할당
 - 파드 네트워크 통신의 접근 제어

## 기본 Namespace

### default

- 기본 네임 스페이스

### kube-node-lease

- 쿠버네티스 노드의 가용성을 체크하기 위한 네임스페이스
- 하트비트를 위한 leases 오브젝트가 있음
	- Health Check를 위한 것
- 쿠버네티스 1.14 버전 이상에서 사용

### kube-public

- 인증 받지 않은 사용자를 포함한 모든 사용자가 읽기 권한으로 접근이 가능
- 관례적으로 만들어져는 있지만, 아무 리소스도 만들어져 있지 않으며 꼭 사용해야 하는 것도 아님
- 쿠버네티스 클러스터를 위해 예약된 공간

### kube-system

- 쿠버네티스 클러스터의 리소스가 배치되는 네임스페이스
- 시스템이나 Add-on이 사용하는 네임스페이스

## Use Cases

![ns](https://github.com/seungwonbased/TIL/blob/main/K8s/assets/ns1.png)

- 하나의 쿠버네티스 클러스터에 다양한 환경(개발, 테스트, 운영 등)을 구현하고자 할 때 사용
	- 하나의 네임스페이스 내에서는 오브젝트의 이름이 중복되는 것을 허용하지 않음

## 다른 Namespace에서 접근

- 클러스터 내부에서는 Service 이름을 이용해서 Pod에 접근하는 것이 가능 
	- 같은 네임스페이스 내의 Service에 접근할 때는 Service 이름만으로 접근이 가능
- 다른 네임스페이스에 존재하는 Service에는 Service 이름만으로는 접근 불가능
	- default 네임스페이스에 생성된 테스트용 임시 Pod는 production 네임스페이스의 Service에 접근할 수 없음
- 다른 네임스페이스에 존재하는 Service는 [서비스 이름].[네임스페이스 이름].svc 처럼 Service 이름 뒤에 네임스페이스 이름을 붙여서 접근해야 함

> 네임스페이스에 속하지 않는 오브젝트는 클러스터 전반에 걸쳐 사용되는 경우가 많음


